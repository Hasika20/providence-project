<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Health-Genie</title>
		<link rel="icon" href="static/images/website-logo.png" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
			integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<link rel="stylesheet" href="./static/css/style.css" />
		<style>
			/* Global Styles */
			body {
				font-family: "Roboto", sans-serif;
				margin: 0;
				padding: 0;
				background-color: rgb(240, 248, 255);
				display: flex;
				flex-direction: column;
				height: 100vh;
			}

			header {
				background-color: rgb(19, 62, 135);
				color: #fff;
				padding: 20px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
			}

			.logo {
				font-size: 28px;
				font-weight: bold;
				text-decoration: none;
				color: #fff;
			}

			.navbar a {
				color: #fff;
				text-decoration: none;
				margin: 0 15px;
				font-size: 16px;
				transition: color 0.3s;
			}

			.navbar a:hover {
				color: rgb(96, 138, 193);
			}

			.footer {
				background-color: rgb(19, 62, 135);
				color: #fff;
				text-align: center;
				padding: 10px;
				position: relative;
			}

			/* Chat Interface Styles */
			#root {
				flex: 1;
				display: flex;
				flex-direction: column;
				padding: 20px;
				background: #f9f9f9;
				border-radius: 8px;
				box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
				overflow: hidden;
			}

			.chats {
				flex: 1;
				overflow-y: auto;
				padding: 10px;
				background-color: #fff;
				border-radius: 8px;
				box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
			}

			.chat {
				margin: 10px 0;
				display: flex;
			}

			.user {
				justify-content: flex-end;
				margin-bottom: 10px;
			}

			.user p {
				background-color: rgb(19, 62, 135);
				color: white;
				padding: 12px;
				border-radius: 20px;
				max-width: 60%;
				text-align: right;
				position: relative;
				margin-left: auto;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			}

			.gemini {
				justify-content: flex-start;
				margin-bottom: 10px;
			}

			.gemini p {
				background-color: rgb(96, 138, 193);
				padding: 12px;
				border-radius: 20px;
				max-width: 60%;
				text-align: left;
				position: relative;
				margin-right: auto;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			}

			#query_area {
				display: flex;
				align-items: center;
				padding: 10px;
				background-color: #fff;
				border-top: 1px solid #e1e1e1;
			}

			#query {
				flex: 1;
				height: 45px;
				border: 1px solid #ccc;
				border-radius: 5px;
				padding: 10px;
				font-size: 16px;
				margin-right: 10px;
				transition: border-color 0.3s;
			}

			#query:focus {
				border-color: rgb(19, 62, 135);
				outline: none;
			}

			#submit {
				background-color: rgb(19, 62, 135);
				border: none;
				color: white;
				border-radius: 5px;
				height: 45px;
				width: 45px;
				cursor: pointer;
				transition: background-color 0.3s;
			}

			#submit:hover {
				background-color: rgb(96, 138, 193);
			}

			/* Loading Animation */
			#loading_div {
				display: flex;
				align-items: center;
			}

			#loading {
				margin-left: 5px;
				animation: loading 1.5s infinite;
			}

			@keyframes loading {
				0% {
					opacity: 1;
				}
				50% {
					opacity: 0.5;
				}
				100% {
					opacity: 1;
				}
			}
		</style>
	</head>

	<body>
		<header class="header">
			<a href="{{url_for('index')}}" class="logo">Health-Genie</a>
			<nav class="navbar">
				{% if username %}
				<a href="{{url_for('index')}}#home">Home</a>
				<a href="{{url_for('index')}}#services">Services</a>
				<a href="{{url_for('index')}}#book">Book</a>
				<a href="{{url_for('index')}}#scans">Scans</a>
				<a href="{{url_for('index')}}#blogs">Blogs</a>
				<a href="{{url_for('index')}}#about">About</a>
				<a href="{{url_for('profile')}}"><span class="fas fa-user"></span></a>
				{% else %}
				<a href="{{url_for('login')}}">Login</a>
				{% endif %}
			</nav>
			<div id="menu-btn" class="fas fa-bars"></div>
		</header>

		<div id="root"></div>

		<section class="footer">
			<div class="credit">&copy; Health-Genie @ 2024</div>
		</section>

		<script src="./static/js/script.js"></script>
		<script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>
		<script>
			window.onload = function () {
				function getUrlParams(url) {
					let urlStr = url.split("?")[1]
					const urlSearchParams = new URLSearchParams(urlStr)
					const result = Object.fromEntries(urlSearchParams.entries())
					return result
				}

				const roomID =
					getUrlParams(window.location.href)["roomID"] ||
					Math.floor(Math.random() * 10000) + ""
				const userID = Math.floor(Math.random() * 10000) + ""
				var user = "{{ username }}"
				const userName = user
				const appID = 418575694
				const serverSecret = "bc75040146595c8302b949df52248430"
				const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
					appID,
					serverSecret,
					roomID,
					userID,
					userName
				)

				const zp = ZegoUIKitPrebuilt.create(kitToken)
				zp.joinRoom({
					container: document.querySelector("#root"),
					sharedLinks: [
						{
							name: "Personal link",
							url:
								window.location.protocol +
								"//" +
								window.location.host +
								window.location.pathname +
								"?roomID=" +
								roomID,
						},
					],
					scenario: {
						mode: ZegoUIKitPrebuilt.VideoConference,
					},
					turnOnMicrophoneWhenJoining: true,
					turnOnCameraWhenJoining: true,
					showMyCameraToggleButton: true,
					showMyMicrophoneToggleButton: true,
					showAudioVideoSettingsButton: true,
					showScreenSharingButton: true,
					showTextChat: true,
					showUserList: true,
					maxUsers: 2,
					layout: "Auto",
					showLayoutButton: false,
				})
			}
		</script>
	</body>
</html>

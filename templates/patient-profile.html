<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health-Genie - your profile</title>
    <link rel="icon" href="static\images\website-logo.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./static/css/style.css" />

<style>
  .footer-section {
    background-color: rgb(96, 138, 193); /* Blue background */
    color: white;
    padding: 40px 0;
    text-align: center;
    margin-top: 40px;
    border-radius: 8px;
}

.box-container {
    display: flex;
    justify-content: center;
    gap: 60px; /* Increased gap between boxes */
    margin-top: 20px;
}

.credit {
    margin-top: 20px;
    font-size: 1.8rem;
    color: white;
    text-align: center;
}

.quick-links {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 20px 0;
    gap: 12px;
}

.quick-links a {
    color: white; /* White color for links */
    text-decoration: none;
    font-size: 1.4rem;
    transition: color 0.3s; /* Smooth color transition */
}

.quick-links a:hover {
    color: #e0e0e0; /* Light grey on hover */
    text-decoration: underline;
}
  /* Global styling */
body {
  font-family: "Arial", sans-serif;
  background-color: #f4f6f9;
  margin: 0;
  padding: 0;
}

header {
  background: rgb(19, 62, 135);
  color: #fff;
  padding: 0.8rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.9rem;
}

.logo {
  font-size: 1.3rem;
  font-weight: bold;
  text-decoration: none;
  color: white;
}

.navbar a {
  margin: 0 0.3rem;
  color: #fff;
  text-decoration: none;
  font-size: 0.8rem;
}

.heading {
  text-align: center;
  font-size: 2rem;
  margin-top: 1.5rem;
  color: rgb(19, 62, 135);
}

.row {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  align-items: center;
  justify-content: center;
  padding: 1.5rem;
  background: #fff;
  margin: 1.5rem;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  font-size: 0.9rem;
}

.image img {
  width: 100%;
  max-width: 250px;
  border-radius: 50%;
}

.content h3 {
  font-size: 1rem;
  margin: 0.3rem 0;
}

.content span {
  font-weight: bold;
  color: rgb(19, 62, 135);
}

.book table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem auto;
  font-size: 0.85rem;
}

.book th, .book td {
  text-align: left;
  padding: 0.8rem;
  border: 1px solid #ddd;
}

.book th {
  background: rgb(19, 62, 135);
  color: #fff;
}

.book td a {
  color: rgb(19, 62, 135);
  text-decoration: underline;
}

.footer {
  background: #222;
  color: #fff;
  padding: 1.5rem;
}

.footer .box-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: space-between;
}

.footer .box h3 {
  margin-bottom: 0.8rem;
  font-size: 1rem;
}

.footer .box a {
  color: rgb(96, 138, 193);
  text-decoration: none;
  font-size: 0.85rem;
  margin: 0.3rem 0;
}

.credit {
  text-align: center;
  margin-top: 1rem;
  font-size: 0.8rem;
}

.styled-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  font-size: 0.85rem;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
}

.styled-table thead tr {
  background-color: rgb(19, 62, 135);
  color: #ffffff;
  text-align: left;
}

.styled-table th, .styled-table td {
  padding: 0.8rem;
}

.styled-table tbody tr {
  border-bottom: 1px solid #ddd;
}

.styled-table tbody tr:nth-of-type(even) {
  background-color: #f3f3f3;
}

.styled-table tbody tr:hover {
  background-color: #e3eff9;
  cursor: pointer;
}

.status-badge {
  display: inline-block;
  padding: 0.4rem 0.8rem;
  border-radius: 10px;
  font-size: 0.75rem;
  color: #fff;
  font-weight: bold;
}

.status-badge.approved {
  background-color: rgb(19, 62, 135);
}

.status-badge.rejected {
  background-color: #e74c3c;
}

.status-badge.pending {
  background-color: #f39c12;
}

.status-badge.prescribed {
  background-color: rgb(96, 138, 193);
}

.not-available {
  color: #bdc3c7;
  font-style: italic;
}


/* Footer styling */
.footer {
  background-color: rgb(19, 62, 135);
  color: #fff;
  padding: 2rem 1rem;
}

.footer .box-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  justify-content: space-between;
}

.footer .box h3 {
  margin-bottom: 1rem;
}

.footer .box a {
  color: rgb(96, 138, 193);
  text-decoration: none;
  display: block;
  margin: 0.5rem 0;
}

.credit {
  text-align: center;
  margin-top: 1rem;
  color: #fff;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .row {
    flex-direction: column;
  }
  .image {
    text-align: center;
  }
  .book table, .styled-table {
    font-size: 0.9rem;
  }
}

</style>>

  </head>

  <body>
    <header class="header">
      <a href="{{url_for('index')}}" class="logo" style="color: white;"
        >Health-Genie</a
      >
      <nav class="navbar">
        {% if username %}
        <a href="#" class="disabled">{{username}}</a>
        <a href="{{url_for('logout')}}">Logout</a>
        {% else %}
        <a href="{{url_for('login')}}">Login</a>
        {% endif %}
      </nav>
    </header>

    <section class="about" id="about">
      <div class="row">
        <div class="image">
          <img
            src="https://cdn3d.iconscout.com/3d/premium/thumb/user-3711850-3105265.png?f=webp"
            alt="User profile picture"
          />
        </div>
        <div class="content">
          <h3>Username: <span>{{username}}</span></h3>
          {% if user_appointments %} {% for appointment in user_appointments %}
          {% if loop.first %}
          <h3>Full Name: <span>{{appointment.name}}</span></h3>
          <h3>Age: <span>{{appointment.age}}</span></h3>
          <h3>Blood Group: <span>{{appointment.blood_group}}</span></h3>
          <h3>Phone Number: <span>{{appointment.phone_number}}</span></h3>
          <h3>Email: <span>{{appointment.email}}</span></h3>
          {% endif %} {% endfor %} {% else %}
          <h3>Email: <span>{{Email}}</span></h3>
          {% endif %}
        </div>
      </div>
    </section>

    {% if user_appointments %}
    <h1 class="heading" style="color: black;">Your <span style="color: rgb(19, 62, 135)">Appointments</span></h1>
    <section class="book" id="book">
      <div class="glass-row-book">
        <table class="styled-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Time Slot</th>
              <th>Type of Doctor</th>
              <th>Status</th>
              <th>Prescription</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in user_appointments %}
            <tr>
              <td>{{ appointment.name }}</td>
              <td>{{ appointment.time_slot }}</td>
              <td>{{ appointment.type_of_doctor }}</td>
              <td>
                <span class="status-badge {{ appointment.status | lower }}">
                  {{ appointment.status }}
                </span>
              </td>
              <td>
                {% if appointment.status == 'Prescribed' %}
                <a
                  href="{{ url_for('view_prescription_patient', appointment_id=appointment.id) }}"
                  target="_blank"
                  class="btn-view"
                  >View Prescription</a
                >
                {% else %}
                <span class="not-available">N/A</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <style>
      .styled-table {
        width: 100%;
        border-collapse: collapse;
        margin: 2rem 0;
        font-size: 1rem;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .styled-table thead tr {
        background-color: #16a085;
        color: #ffffff;
        text-align: left;
      }
      .styled-table th,
      .styled-table td {
        padding: 1rem;
      }
      .styled-table tbody tr {
        border-bottom: 1px solid #dddddd;
      }
      .styled-table tbody tr:nth-of-type(even) {
        background-color: #f3f3f3;
      }
      .styled-table tbody tr:hover {
        background-color: #e9f5f5;
        cursor: pointer;
      }
      .status-badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        border-radius: 12px;
        font-size: 0.9rem;
        color: #fff;
        font-weight: bold;
      }
      .status-badge.approved {
        background-color: #16a085;
      }
      .status-badge.rejected {
        background-color: #e74c3c;
      }
      .status-badge.pending {
        background-color: #f39c12;
      }
      .status-badge.prescribed {
        background-color: #3498db;
      }
      .btn-view {
        color: white;
        background-color: #3498db;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 5px;
        text-decoration: none;
        transition: background-color 0.3s;
      }
      .btn-view:hover {
        background-color: #2980b9;
      }
      .not-available {
        color: #bdc3c7;
        font-style: italic;
      }
    </style>

    {% endif %}
    <style>
        .chatbot-button {
				position: fixed;
				bottom: 20px;
				right: 20px;
				background-color: #133e87;
				color: white;
				border: none;
				border-radius: 50%;
				width: 60px;
				height: 60px;
				font-size: 24px;
				cursor: pointer;
				box-shadow: 0 4px 10px rgba(22, 158, 133, 0.5);
			}

			.chat-container {
				display: none;
				position: fixed;
				bottom: 80px;
				right: 20px;
				width: 300px;
				background-color: #ffffff;
				border-radius: 10px;
				box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
				overflow: hidden;
			}

			.chat-header {
				background-color: #133e87;
				color: white;
				padding: 10px;
				text-align: center;
			}

			.chat-body {
				max-height: 200px;
				padding: 10px;
				overflow-y: auto;
			}

			.chat-input {
				display: flex;
				padding: 10px;
				border-top: 1px solid #ccc;
			}

			.chat-input input {
				flex: 1;
				padding: 8px;
				border: 1px solid #ccc;
				border-radius: 4px;
			}

			.chat-input button {
				background-color: #133e87;
				color: white;
				border: none;
				padding: 8px;
				margin-left: 5px;
				cursor: pointer;
			}
      </style>

      <button class="chatbot-button" id="chatbot-toggle">
        <i class="fas fa-comment-alt"></i>
      </button>

      <!-- Chat Container -->
      <div class="chat-container" id="chat-container">
        <div class="chat-header">
          <h3>Chat with us!</h3>
        </div>
        <div class="chat-body" id="chat-body">
          <!-- Chat messages will be appended here -->
        </div>
        <div class="chat-input">
          <input
            type="text"
            id="chat-input"
            placeholder="Type your message..."
          />
          <button id="send-button">Send</button>
        </div>
      </div>

      <script>
        // Toggle Chat Window
        document.getElementById("chatbot-toggle").onclick = function () {
          const chatContainer = document.getElementById("chat-container");
          if (
            chatContainer.style.display === "none" ||
            chatContainer.style.display === ""
          ) {
            chatContainer.style.display = "block";
          } else {
            chatContainer.style.display = "none";
          }
        };

        // Send Message Handler
        document.getElementById("send-button").onclick = async function () {
          const input = document.getElementById("chat-input");
          const message = input.value;

          console.log(message);

          if (message.trim() !== "") {
            try {
              // Send POST request to server
              const res = await fetch("/chat1", {
                method: "POST",
                body: JSON.stringify({ query: message }),
                headers: { "Content-Type": "application/json" },
              });

              if (!res.ok) {
                throw new Error("Server responded with an error.");
              }

              const data = await res.json(); // Await response JSON

              appendMessage("user", message); // Append user message
              input.value = ""; // Clear input field

              console.log(data); // Log the response data

              appendMessage("bot", data.response); // Append bot response from server
            } catch (error) {
              console.error("Error sending message:", error);
              appendMessage(
                "bot",
                "An error occurred. Please try again later."
              );
            }
          }
        };

        // Function to Append Chat Messages
        function appendMessage(sender, message) {
          const chatBody = document.getElementById("chat-body");
          const messageDiv = document.createElement("div");
          messageDiv.className =
            "chat-message " +
            (sender === "user" ? "user-message" : "bot-message");
          messageDiv.textContent = message;
          chatBody.appendChild(messageDiv);
          chatBody.scrollTop = chatBody.scrollHeight; // Scroll to the bottom
        }
      </script>
    </section>

    <section class="footer-section">
			<div class="box-container">
				<div class="quick-links">
					<h3 style="font-size: 2rem;">Quick Links</h3>
					<a href="{{url_for('index')}}#home"
						><i class="fas fa-chevron-right"></i> Home</a
					>
					<a href="{{url_for('index')}}#services"
						><i class="fas fa-chevron-right"></i> Services</a
					>
					<a href="{{url_for('index')}}#book"
						><i class="fas fa-chevron-right"></i> Book</a
					>
					<a href="{{url_for('index')}}#scans"
						><i class="fas fa-chevron-right"></i> Scans</a
					>
					<a href="{{url_for('index')}}#blogs"
						><i class="fas fa-chevron-right"></i> Blogs</a
					>
					<a href="{{url_for('index')}}#about"
						><i class="fas fa-chevron-right"></i> About</a
					>
				</div>
			</div>
			<div class="credit">&copy; Health-Genie @ 2024</div>
		</section>



    <script src="./static/js/script.js"></script>
    <script>
      $(".carousel").owlCarousel({
        margin: 20,
        loop: true,
        autoplay: true,
        autoplayTimeOut: 2000,
        autoplayHoverPause: true,
        responsive: {
          0: {
            items: 1,
            nav: false,
          },
          600: {
            items: 2,
            nav: false,
          },
          1000: {
            items: 4,
            nav: false,
          },
        },
      });
    </script>
  </body>
</html>